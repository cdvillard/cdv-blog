---
import { type CollectionEntry, getCollection, render } from 'astro:content';
import BlogPost from '../../layouts/BlogPost.astro';

export async function getStaticPaths() {
  const blogEntries = await getCollection('posts');
  return blogEntries
    .filter(entry => !entry.data.draft && !entry.data.rssOnly)
    .map(entry => ({
      params: { id: decodeURI(entry.id) }, props: { entry },
    }));
}

const { entry }: { entry: CollectionEntry<'posts'> } = Astro.props;
const { Content } = await render(entry);
---
<BlogPost
  content={entry.data}
  url={entry.id}
>
  <Content />
</BlogPost>