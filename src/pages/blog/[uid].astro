---
import SliceZone from "../../components/SliceZone.astro";
import * as prismicH from "@prismicio/helpers";
import { getAllBlogPosts } from "../../lib/prismicio";
import Base from "../../layouts/Base.astro";

export async function getStaticPaths() {
  const allBlogPosts = await getAllBlogPosts();

  const paths = allBlogPosts.map((blogPost) => ({
    params: { uid: blogPost.uid },
    props: blogPost,
  }));

  return paths;
}

const blogPost = Astro.props;
const title = prismicH.asHTML(blogPost.data.title);
---

<Base>
  <Fragment set:html={title} />
  <SliceZone slices={blogPost.data.slices} />
</Base>