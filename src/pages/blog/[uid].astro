---
import SliceZone from "../../components/SliceZone.astro";
import { getAllBlogPosts } from "../../lib/prismicio";
import BlogPost from "../../layouts/BlogPost.astro";

export async function getStaticPaths() {
  const allBlogPosts = await getAllBlogPosts();

  const paths = allBlogPosts.map((blogPost) => ({
    params: { uid: blogPost.uid },
    props: blogPost,
  }));

  return paths;
}

const blogPost = Astro.props;
---

<BlogPost
  blogPost={blogPost}
>
  <SliceZone slices={blogPost.data.slices} />
</BlogPost>